"use strict";var Magic=(()=>{var Hn=Object.create;var je=Object.defineProperty;var Xn=Object.getOwnPropertyDescriptor;var zn=Object.getOwnPropertyNames,tr=Object.getOwnPropertySymbols,Jn=Object.getPrototypeOf,nr=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable;var rr=(e,t,n)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ir=(e,t)=>{for(var n in t||(t={}))nr.call(t,n)&&rr(e,n,t[n]);if(tr)for(var n of tr(t))Qn.call(t,n)&&rr(e,n,t[n]);return e};var qe=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,n)=>(typeof require!="undefined"?require:t)[n]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var or=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ar=(e,t)=>{for(var n in t)je(e,n,{get:t[n],enumerable:!0})},sr=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of zn(t))!nr.call(e,a)&&a!==n&&je(e,a,{get:()=>t[a],enumerable:!(o=Xn(t,a))||o.enumerable});return e};var lr=(e,t,n)=>(n=e!=null?Hn(Jn(e)):{},sr(t||!e||!e.__esModule?je(n,"default",{value:e,enumerable:!0}):n,e)),Zn=e=>sr(je({},"__esModule",{value:!0}),e);var Me=(e,t,n)=>new Promise((o,a)=>{var l=g=>{try{h(n.next(g))}catch(v){a(v)}},m=g=>{try{h(n.throw(g))}catch(v){a(v)}},h=g=>g.done?o(g.value):Promise.resolve(g.value).then(l,m);h((n=n.apply(e,t)).next())});var zr=or((Xr,$t)=>{(function(e){if(typeof Xr=="object"&&typeof $t<"u")$t.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.localforage=e()}})(function(){var e,t,n;return function o(a,l,m){function h(E,T){if(!l[E]){if(!a[E]){var _=typeof qe=="function"&&qe;if(!T&&_)return _(E,!0);if(g)return g(E,!0);var N=new Error("Cannot find module '"+E+"'");throw N.code="MODULE_NOT_FOUND",N}var $=l[E]={exports:{}};a[E][0].call($.exports,function(k){var L=a[E][1][k];return h(L||k)},$,$.exports,o,a,l,m)}return l[E].exports}for(var g=typeof qe=="function"&&qe,v=0;v<m.length;v++)h(m[v]);return h}({1:[function(o,a,l){(function(m){"use strict";var h=m.MutationObserver||m.WebKitMutationObserver,g;if(h){var v=0,E=new h(k),T=m.document.createTextNode("");E.observe(T,{characterData:!0}),g=function(){T.data=v=++v%2}}else if(!m.setImmediate&&typeof m.MessageChannel<"u"){var _=new m.MessageChannel;_.port1.onmessage=k,g=function(){_.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?g=function(){var F=m.document.createElement("script");F.onreadystatechange=function(){k(),F.onreadystatechange=null,F.parentNode.removeChild(F),F=null},m.document.documentElement.appendChild(F)}:g=function(){setTimeout(k,0)};var N,$=[];function k(){N=!0;for(var F,J,D=$.length;D;){for(J=$,$=[],F=-1;++F<D;)J[F]();D=$.length}N=!1}a.exports=L;function L(F){$.push(F)===1&&!N&&g()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(o,a,l){"use strict";var m=o(1);function h(){}var g={},v=["REJECTED"],E=["FULFILLED"],T=["PENDING"];a.exports=_;function _(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,S!==h&&L(this,S)}_.prototype.catch=function(S){return this.then(null,S)},_.prototype.then=function(S,G){if(typeof S!="function"&&this.state===E||typeof G!="function"&&this.state===v)return this;var U=new this.constructor(h);if(this.state!==T){var V=this.state===E?S:G;$(U,V,this.outcome)}else this.queue.push(new N(U,S,G));return U};function N(S,G,U){this.promise=S,typeof G=="function"&&(this.onFulfilled=G,this.callFulfilled=this.otherCallFulfilled),typeof U=="function"&&(this.onRejected=U,this.callRejected=this.otherCallRejected)}N.prototype.callFulfilled=function(S){g.resolve(this.promise,S)},N.prototype.otherCallFulfilled=function(S){$(this.promise,this.onFulfilled,S)},N.prototype.callRejected=function(S){g.reject(this.promise,S)},N.prototype.otherCallRejected=function(S){$(this.promise,this.onRejected,S)};function $(S,G,U){m(function(){var V;try{V=G(U)}catch(Q){return g.reject(S,Q)}V===S?g.reject(S,new TypeError("Cannot resolve promise with itself")):g.resolve(S,V)})}g.resolve=function(S,G){var U=F(k,G);if(U.status==="error")return g.reject(S,U.value);var V=U.value;if(V)L(S,V);else{S.state=E,S.outcome=G;for(var Q=-1,ie=S.queue.length;++Q<ie;)S.queue[Q].callFulfilled(G)}return S},g.reject=function(S,G){S.state=v,S.outcome=G;for(var U=-1,V=S.queue.length;++U<V;)S.queue[U].callRejected(G);return S};function k(S){var G=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof G=="function")return function(){G.apply(S,arguments)}}function L(S,G){var U=!1;function V(le){U||(U=!0,g.reject(S,le))}function Q(le){U||(U=!0,g.resolve(S,le))}function ie(){G(Q,V)}var se=F(ie);se.status==="error"&&V(se.value)}function F(S,G){var U={};try{U.value=S(G),U.status="success"}catch(V){U.status="error",U.value=V}return U}_.resolve=J;function J(S){return S instanceof this?S:g.resolve(new this(h),S)}_.reject=D;function D(S){var G=new this(h);return g.reject(G,S)}_.all=ve;function ve(S){var G=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=S.length,V=!1;if(!U)return this.resolve([]);for(var Q=new Array(U),ie=0,se=-1,le=new this(h);++se<U;)fe(S[se],se);return le;function fe(_e,d){G.resolve(_e).then(I,function(A){V||(V=!0,g.reject(le,A))});function I(A){Q[d]=A,++ie===U&&!V&&(V=!0,g.resolve(le,Q))}}}_.race=ne;function ne(S){var G=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=S.length,V=!1;if(!U)return this.resolve([]);for(var Q=-1,ie=new this(h);++Q<U;)se(S[Q]);return ie;function se(le){G.resolve(le).then(function(fe){V||(V=!0,g.resolve(ie,fe))},function(fe){V||(V=!0,g.reject(ie,fe))})}}},{1:1}],3:[function(o,a,l){(function(m){"use strict";typeof m.Promise!="function"&&(m.Promise=o(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(o,a,l){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function h(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function g(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var v=g();function E(){try{if(!v||!v.open)return!1;var r=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),s=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!r||s)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function T(r,s){r=r||[],s=s||{};try{return new Blob(r,s)}catch(c){if(c.name!=="TypeError")throw c;for(var i=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,u=new i,f=0;f<r.length;f+=1)u.append(r[f]);return u.getBlob(s.type)}}typeof Promise>"u"&&o(3);var _=Promise;function N(r,s){s&&r.then(function(i){s(null,i)},function(i){s(i)})}function $(r,s,i){typeof s=="function"&&r.then(s),typeof i=="function"&&r.catch(i)}function k(r){return typeof r!="string"&&(console.warn(r+" used as a key, but it is not a string."),r=String(r)),r}function L(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var F="local-forage-detect-blob-support",J=void 0,D={},ve=Object.prototype.toString,ne="readonly",S="readwrite";function G(r){for(var s=r.length,i=new ArrayBuffer(s),u=new Uint8Array(i),f=0;f<s;f++)u[f]=r.charCodeAt(f);return i}function U(r){return new _(function(s){var i=r.transaction(F,S),u=T([""]);i.objectStore(F).put(u,"key"),i.onabort=function(f){f.preventDefault(),f.stopPropagation(),s(!1)},i.oncomplete=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);s(c||!f||parseInt(f[1],10)>=43)}}).catch(function(){return!1})}function V(r){return typeof J=="boolean"?_.resolve(J):U(r).then(function(s){return J=s,J})}function Q(r){var s=D[r.name],i={};i.promise=new _(function(u,f){i.resolve=u,i.reject=f}),s.deferredOperations.push(i),s.dbReady?s.dbReady=s.dbReady.then(function(){return i.promise}):s.dbReady=i.promise}function ie(r){var s=D[r.name],i=s.deferredOperations.pop();if(i)return i.resolve(),i.promise}function se(r,s){var i=D[r.name],u=i.deferredOperations.pop();if(u)return u.reject(s),u.promise}function le(r,s){return new _(function(i,u){if(D[r.name]=D[r.name]||Z(),r.db)if(s)Q(r),r.db.close();else return i(r.db);var f=[r.name];s&&f.push(r.version);var c=v.open.apply(v,f);s&&(c.onupgradeneeded=function(p){var y=c.result;try{y.createObjectStore(r.storeName),p.oldVersion<=1&&y.createObjectStore(F)}catch(w){if(w.name==="ConstraintError")console.warn('The database "'+r.name+'" has been upgraded from version '+p.oldVersion+" to version "+p.newVersion+', but the storage "'+r.storeName+'" already exists.');else throw w}}),c.onerror=function(p){p.preventDefault(),u(c.error)},c.onsuccess=function(){var p=c.result;p.onversionchange=function(y){y.target.close()},i(p),ie(r)}})}function fe(r){return le(r,!1)}function _e(r){return le(r,!0)}function d(r,s){if(!r.db)return!0;var i=!r.db.objectStoreNames.contains(r.storeName),u=r.version<r.db.version,f=r.version>r.db.version;if(u&&(r.version!==s&&console.warn('The database "'+r.name+`" can't be downgraded from version `+r.db.version+" to version "+r.version+"."),r.version=r.db.version),f||i){if(i){var c=r.db.version+1;c>r.version&&(r.version=c)}return!0}return!1}function I(r){return new _(function(s,i){var u=new FileReader;u.onerror=i,u.onloadend=function(f){var c=btoa(f.target.result||"");s({__local_forage_encoded_blob:!0,data:c,type:r.type})},u.readAsBinaryString(r)})}function A(r){var s=G(atob(r.data));return T([s],{type:r.type})}function P(r){return r&&r.__local_forage_encoded_blob}function C(r){var s=this,i=s._initReady().then(function(){var u=D[s._dbInfo.name];if(u&&u.dbReady)return u.dbReady});return $(i,r,r),i}function x(r){Q(r);for(var s=D[r.name],i=s.forages,u=0;u<i.length;u++){var f=i[u];f._dbInfo.db&&(f._dbInfo.db.close(),f._dbInfo.db=null)}return r.db=null,fe(r).then(function(c){return r.db=c,d(r)?_e(r):c}).then(function(c){r.db=s.db=c;for(var p=0;p<i.length;p++)i[p]._dbInfo.db=c}).catch(function(c){throw se(r,c),c})}function j(r,s,i,u){u===void 0&&(u=1);try{var f=r.db.transaction(r.storeName,s);i(null,f)}catch(c){if(u>0&&(!r.db||c.name==="InvalidStateError"||c.name==="NotFoundError"))return _.resolve().then(function(){if(!r.db||c.name==="NotFoundError"&&!r.db.objectStoreNames.contains(r.storeName)&&r.version<=r.db.version)return r.db&&(r.version=r.db.version+1),_e(r)}).then(function(){return x(r).then(function(){j(r,s,i,u-1)})}).catch(i);i(c)}}function Z(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Te(r){var s=this,i={db:null};if(r)for(var u in r)i[u]=r[u];var f=D[i.name];f||(f=Z(),D[i.name]=f),f.forages.push(s),s._initReady||(s._initReady=s.ready,s.ready=C);var c=[];function p(){return _.resolve()}for(var y=0;y<f.forages.length;y++){var w=f.forages[y];w!==s&&c.push(w._initReady().catch(p))}var b=f.forages.slice(0);return _.all(c).then(function(){return i.db=f.db,fe(i)}).then(function(R){return i.db=R,d(i,s._defaultConfig.version)?_e(i):R}).then(function(R){i.db=f.db=R,s._dbInfo=i;for(var M=0;M<b.length;M++){var B=b[M];B!==s&&(B._dbInfo.db=i.db,B._dbInfo.version=i.version)}})}function Ie(r,s){var i=this;r=k(r);var u=new _(function(f,c){i.ready().then(function(){j(i._dbInfo,ne,function(p,y){if(p)return c(p);try{var w=y.objectStore(i._dbInfo.storeName),b=w.get(r);b.onsuccess=function(){var R=b.result;R===void 0&&(R=null),P(R)&&(R=A(R)),f(R)},b.onerror=function(){c(b.error)}}catch(R){c(R)}})}).catch(c)});return N(u,s),u}function We(r,s){var i=this,u=new _(function(f,c){i.ready().then(function(){j(i._dbInfo,ne,function(p,y){if(p)return c(p);try{var w=y.objectStore(i._dbInfo.storeName),b=w.openCursor(),R=1;b.onsuccess=function(){var M=b.result;if(M){var B=M.value;P(B)&&(B=A(B));var q=r(B,M.key,R++);q!==void 0?f(q):M.continue()}else f()},b.onerror=function(){c(b.error)}}catch(M){c(M)}})}).catch(c)});return N(u,s),u}function Zr(r,s,i){var u=this;r=k(r);var f=new _(function(c,p){var y;u.ready().then(function(){return y=u._dbInfo,ve.call(s)==="[object Blob]"?V(y.db).then(function(w){return w?s:I(s)}):s}).then(function(w){j(u._dbInfo,S,function(b,R){if(b)return p(b);try{var M=R.objectStore(u._dbInfo.storeName);w===null&&(w=void 0);var B=M.put(w,r);R.oncomplete=function(){w===void 0&&(w=null),c(w)},R.onabort=R.onerror=function(){var q=B.error?B.error:B.transaction.error;p(q)}}catch(q){p(q)}})}).catch(p)});return N(f,i),f}function en(r,s){var i=this;r=k(r);var u=new _(function(f,c){i.ready().then(function(){j(i._dbInfo,S,function(p,y){if(p)return c(p);try{var w=y.objectStore(i._dbInfo.storeName),b=w.delete(r);y.oncomplete=function(){f()},y.onerror=function(){c(b.error)},y.onabort=function(){var R=b.error?b.error:b.transaction.error;c(R)}}catch(R){c(R)}})}).catch(c)});return N(u,s),u}function tn(r){var s=this,i=new _(function(u,f){s.ready().then(function(){j(s._dbInfo,S,function(c,p){if(c)return f(c);try{var y=p.objectStore(s._dbInfo.storeName),w=y.clear();p.oncomplete=function(){u()},p.onabort=p.onerror=function(){var b=w.error?w.error:w.transaction.error;f(b)}}catch(b){f(b)}})}).catch(f)});return N(i,r),i}function rn(r){var s=this,i=new _(function(u,f){s.ready().then(function(){j(s._dbInfo,ne,function(c,p){if(c)return f(c);try{var y=p.objectStore(s._dbInfo.storeName),w=y.count();w.onsuccess=function(){u(w.result)},w.onerror=function(){f(w.error)}}catch(b){f(b)}})}).catch(f)});return N(i,r),i}function nn(r,s){var i=this,u=new _(function(f,c){if(r<0){f(null);return}i.ready().then(function(){j(i._dbInfo,ne,function(p,y){if(p)return c(p);try{var w=y.objectStore(i._dbInfo.storeName),b=!1,R=w.openKeyCursor();R.onsuccess=function(){var M=R.result;if(!M){f(null);return}r===0||b?f(M.key):(b=!0,M.advance(r))},R.onerror=function(){c(R.error)}}catch(M){c(M)}})}).catch(c)});return N(u,s),u}function on(r){var s=this,i=new _(function(u,f){s.ready().then(function(){j(s._dbInfo,ne,function(c,p){if(c)return f(c);try{var y=p.objectStore(s._dbInfo.storeName),w=y.openKeyCursor(),b=[];w.onsuccess=function(){var R=w.result;if(!R){u(b);return}b.push(R.key),R.continue()},w.onerror=function(){f(w.error)}}catch(R){f(R)}})}).catch(f)});return N(i,r),i}function an(r,s){s=L.apply(this,arguments);var i=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||i.name,r.storeName=r.storeName||i.storeName);var u=this,f;if(!r.name)f=_.reject("Invalid arguments");else{var c=r.name===i.name&&u._dbInfo.db,p=c?_.resolve(u._dbInfo.db):fe(r).then(function(y){var w=D[r.name],b=w.forages;w.db=y;for(var R=0;R<b.length;R++)b[R]._dbInfo.db=y;return y});r.storeName?f=p.then(function(y){if(!!y.objectStoreNames.contains(r.storeName)){var w=y.version+1;Q(r);var b=D[r.name],R=b.forages;y.close();for(var M=0;M<R.length;M++){var B=R[M];B._dbInfo.db=null,B._dbInfo.version=w}var q=new _(function(K,z){var X=v.open(r.name,w);X.onerror=function(ue){var Ge=X.result;Ge.close(),z(ue)},X.onupgradeneeded=function(){var ue=X.result;ue.deleteObjectStore(r.storeName)},X.onsuccess=function(){var ue=X.result;ue.close(),K(ue)}});return q.then(function(K){b.db=K;for(var z=0;z<R.length;z++){var X=R[z];X._dbInfo.db=K,ie(X._dbInfo)}}).catch(function(K){throw(se(r,K)||_.resolve()).catch(function(){}),K})}}):f=p.then(function(y){Q(r);var w=D[r.name],b=w.forages;y.close();for(var R=0;R<b.length;R++){var M=b[R];M._dbInfo.db=null}var B=new _(function(q,K){var z=v.deleteDatabase(r.name);z.onerror=function(){var X=z.result;X&&X.close(),K(z.error)},z.onblocked=function(){console.warn('dropInstance blocked for database "'+r.name+'" until all open connections are closed')},z.onsuccess=function(){var X=z.result;X&&X.close(),q(X)}});return B.then(function(q){w.db=q;for(var K=0;K<b.length;K++){var z=b[K];ie(z._dbInfo)}}).catch(function(q){throw(se(r,q)||_.resolve()).catch(function(){}),q})})}return N(f,s),f}var sn={_driver:"asyncStorage",_initStorage:Te,_support:E(),iterate:We,getItem:Ie,setItem:Zr,removeItem:en,clear:tn,length:rn,key:nn,keys:on,dropInstance:an};function ln(){return typeof openDatabase=="function"}var ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cn="~~local_forage_type~",xt=/^~~local_forage_type~([^~]+)~/,Qe="__lfsc__:",ht=Qe.length,pt="arbf",mt="blob",Ut="si08",kt="ui08",Bt="uic8",Wt="si16",Ft="si32",Gt="ur16",jt="ui32",qt="fl32",Vt="fl64",Kt=ht+pt.length,Yt=Object.prototype.toString;function Ht(r){var s=r.length*.75,i=r.length,u,f=0,c,p,y,w;r[r.length-1]==="="&&(s--,r[r.length-2]==="="&&s--);var b=new ArrayBuffer(s),R=new Uint8Array(b);for(u=0;u<i;u+=4)c=ge.indexOf(r[u]),p=ge.indexOf(r[u+1]),y=ge.indexOf(r[u+2]),w=ge.indexOf(r[u+3]),R[f++]=c<<2|p>>4,R[f++]=(p&15)<<4|y>>2,R[f++]=(y&3)<<6|w&63;return b}function vt(r){var s=new Uint8Array(r),i="",u;for(u=0;u<s.length;u+=3)i+=ge[s[u]>>2],i+=ge[(s[u]&3)<<4|s[u+1]>>4],i+=ge[(s[u+1]&15)<<2|s[u+2]>>6],i+=ge[s[u+2]&63];return s.length%3===2?i=i.substring(0,i.length-1)+"=":s.length%3===1&&(i=i.substring(0,i.length-2)+"=="),i}function un(r,s){var i="";if(r&&(i=Yt.call(r)),r&&(i==="[object ArrayBuffer]"||r.buffer&&Yt.call(r.buffer)==="[object ArrayBuffer]")){var u,f=Qe;r instanceof ArrayBuffer?(u=r,f+=pt):(u=r.buffer,i==="[object Int8Array]"?f+=Ut:i==="[object Uint8Array]"?f+=kt:i==="[object Uint8ClampedArray]"?f+=Bt:i==="[object Int16Array]"?f+=Wt:i==="[object Uint16Array]"?f+=Gt:i==="[object Int32Array]"?f+=Ft:i==="[object Uint32Array]"?f+=jt:i==="[object Float32Array]"?f+=qt:i==="[object Float64Array]"?f+=Vt:s(new Error("Failed to get type for BinaryArray"))),s(f+vt(u))}else if(i==="[object Blob]"){var c=new FileReader;c.onload=function(){var p=cn+r.type+"~"+vt(this.result);s(Qe+mt+p)},c.readAsArrayBuffer(r)}else try{s(JSON.stringify(r))}catch(p){console.error("Couldn't convert value into a JSON string: ",r),s(null,p)}}function fn(r){if(r.substring(0,ht)!==Qe)return JSON.parse(r);var s=r.substring(Kt),i=r.substring(ht,Kt),u;if(i===mt&&xt.test(s)){var f=s.match(xt);u=f[1],s=s.substring(f[0].length)}var c=Ht(s);switch(i){case pt:return c;case mt:return T([c],{type:u});case Ut:return new Int8Array(c);case kt:return new Uint8Array(c);case Bt:return new Uint8ClampedArray(c);case Wt:return new Int16Array(c);case Gt:return new Uint16Array(c);case Ft:return new Int32Array(c);case jt:return new Uint32Array(c);case qt:return new Float32Array(c);case Vt:return new Float64Array(c);default:throw new Error("Unkown type: "+i)}}var gt={serialize:un,deserialize:fn,stringToBuffer:Ht,bufferToString:vt};function Xt(r,s,i,u){r.executeSql("CREATE TABLE IF NOT EXISTS "+s.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,u)}function dn(r){var s=this,i={db:null};if(r)for(var u in r)i[u]=typeof r[u]!="string"?r[u].toString():r[u];var f=new _(function(c,p){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(y){return p(y)}i.db.transaction(function(y){Xt(y,i,function(){s._dbInfo=i,c()},function(w,b){p(b)})},p)});return i.serializer=gt,f}function ye(r,s,i,u,f,c){r.executeSql(i,u,f,function(p,y){y.code===y.SYNTAX_ERR?p.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[s.storeName],function(w,b){b.rows.length?c(w,y):Xt(w,s,function(){w.executeSql(i,u,f,c)},c)},c):c(p,y)},c)}function hn(r,s){var i=this;r=k(r);var u=new _(function(f,c){i.ready().then(function(){var p=i._dbInfo;p.db.transaction(function(y){ye(y,p,"SELECT * FROM "+p.storeName+" WHERE key = ? LIMIT 1",[r],function(w,b){var R=b.rows.length?b.rows.item(0).value:null;R&&(R=p.serializer.deserialize(R)),f(R)},function(w,b){c(b)})})}).catch(c)});return N(u,s),u}function pn(r,s){var i=this,u=new _(function(f,c){i.ready().then(function(){var p=i._dbInfo;p.db.transaction(function(y){ye(y,p,"SELECT * FROM "+p.storeName,[],function(w,b){for(var R=b.rows,M=R.length,B=0;B<M;B++){var q=R.item(B),K=q.value;if(K&&(K=p.serializer.deserialize(K)),K=r(K,q.key,B+1),K!==void 0){f(K);return}}f()},function(w,b){c(b)})})}).catch(c)});return N(u,s),u}function zt(r,s,i,u){var f=this;r=k(r);var c=new _(function(p,y){f.ready().then(function(){s===void 0&&(s=null);var w=s,b=f._dbInfo;b.serializer.serialize(s,function(R,M){M?y(M):b.db.transaction(function(B){ye(B,b,"INSERT OR REPLACE INTO "+b.storeName+" (key, value) VALUES (?, ?)",[r,R],function(){p(w)},function(q,K){y(K)})},function(B){if(B.code===B.QUOTA_ERR){if(u>0){p(zt.apply(f,[r,w,i,u-1]));return}y(B)}})})}).catch(y)});return N(c,i),c}function mn(r,s,i){return zt.apply(this,[r,s,i,1])}function vn(r,s){var i=this;r=k(r);var u=new _(function(f,c){i.ready().then(function(){var p=i._dbInfo;p.db.transaction(function(y){ye(y,p,"DELETE FROM "+p.storeName+" WHERE key = ?",[r],function(){f()},function(w,b){c(b)})})}).catch(c)});return N(u,s),u}function gn(r){var s=this,i=new _(function(u,f){s.ready().then(function(){var c=s._dbInfo;c.db.transaction(function(p){ye(p,c,"DELETE FROM "+c.storeName,[],function(){u()},function(y,w){f(w)})})}).catch(f)});return N(i,r),i}function yn(r){var s=this,i=new _(function(u,f){s.ready().then(function(){var c=s._dbInfo;c.db.transaction(function(p){ye(p,c,"SELECT COUNT(key) as c FROM "+c.storeName,[],function(y,w){var b=w.rows.item(0).c;u(b)},function(y,w){f(w)})})}).catch(f)});return N(i,r),i}function En(r,s){var i=this,u=new _(function(f,c){i.ready().then(function(){var p=i._dbInfo;p.db.transaction(function(y){ye(y,p,"SELECT key FROM "+p.storeName+" WHERE id = ? LIMIT 1",[r+1],function(w,b){var R=b.rows.length?b.rows.item(0).key:null;f(R)},function(w,b){c(b)})})}).catch(c)});return N(u,s),u}function _n(r){var s=this,i=new _(function(u,f){s.ready().then(function(){var c=s._dbInfo;c.db.transaction(function(p){ye(p,c,"SELECT key FROM "+c.storeName,[],function(y,w){for(var b=[],R=0;R<w.rows.length;R++)b.push(w.rows.item(R).key);u(b)},function(y,w){f(w)})})}).catch(f)});return N(i,r),i}function In(r){return new _(function(s,i){r.transaction(function(u){u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(f,c){for(var p=[],y=0;y<c.rows.length;y++)p.push(c.rows.item(y).name);s({db:r,storeNames:p})},function(f,c){i(c)})},function(u){i(u)})})}function wn(r,s){s=L.apply(this,arguments);var i=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||i.name,r.storeName=r.storeName||i.storeName);var u=this,f;return r.name?f=new _(function(c){var p;r.name===i.name?p=u._dbInfo.db:p=openDatabase(r.name,"","",0),r.storeName?c({db:p,storeNames:[r.storeName]}):c(In(p))}).then(function(c){return new _(function(p,y){c.db.transaction(function(w){function b(q){return new _(function(K,z){w.executeSql("DROP TABLE IF EXISTS "+q,[],function(){K()},function(X,ue){z(ue)})})}for(var R=[],M=0,B=c.storeNames.length;M<B;M++)R.push(b(c.storeNames[M]));_.all(R).then(function(){p()}).catch(function(q){y(q)})},function(w){y(w)})})}):f=_.reject("Invalid arguments"),N(f,s),f}var bn={_driver:"webSQLStorage",_initStorage:dn,_support:ln(),iterate:pn,getItem:hn,setItem:mn,removeItem:vn,clear:gn,length:yn,key:En,keys:_n,dropInstance:wn};function Rn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Jt(r,s){var i=r.name+"/";return r.storeName!==s.storeName&&(i+=r.storeName+"/"),i}function An(){var r="_localforage_support_test";try{return localStorage.setItem(r,!0),localStorage.removeItem(r),!1}catch{return!0}}function Sn(){return!An()||localStorage.length>0}function Tn(r){var s=this,i={};if(r)for(var u in r)i[u]=r[u];return i.keyPrefix=Jt(r,s._defaultConfig),Sn()?(s._dbInfo=i,i.serializer=gt,_.resolve()):_.reject()}function Nn(r){var s=this,i=s.ready().then(function(){for(var u=s._dbInfo.keyPrefix,f=localStorage.length-1;f>=0;f--){var c=localStorage.key(f);c.indexOf(u)===0&&localStorage.removeItem(c)}});return N(i,r),i}function Mn(r,s){var i=this;r=k(r);var u=i.ready().then(function(){var f=i._dbInfo,c=localStorage.getItem(f.keyPrefix+r);return c&&(c=f.serializer.deserialize(c)),c});return N(u,s),u}function On(r,s){var i=this,u=i.ready().then(function(){for(var f=i._dbInfo,c=f.keyPrefix,p=c.length,y=localStorage.length,w=1,b=0;b<y;b++){var R=localStorage.key(b);if(R.indexOf(c)===0){var M=localStorage.getItem(R);if(M&&(M=f.serializer.deserialize(M)),M=r(M,R.substring(p),w++),M!==void 0)return M}}});return N(u,s),u}function Ln(r,s){var i=this,u=i.ready().then(function(){var f=i._dbInfo,c;try{c=localStorage.key(r)}catch{c=null}return c&&(c=c.substring(f.keyPrefix.length)),c});return N(u,s),u}function Pn(r){var s=this,i=s.ready().then(function(){for(var u=s._dbInfo,f=localStorage.length,c=[],p=0;p<f;p++){var y=localStorage.key(p);y.indexOf(u.keyPrefix)===0&&c.push(y.substring(u.keyPrefix.length))}return c});return N(i,r),i}function Cn(r){var s=this,i=s.keys().then(function(u){return u.length});return N(i,r),i}function $n(r,s){var i=this;r=k(r);var u=i.ready().then(function(){var f=i._dbInfo;localStorage.removeItem(f.keyPrefix+r)});return N(u,s),u}function Dn(r,s,i){var u=this;r=k(r);var f=u.ready().then(function(){s===void 0&&(s=null);var c=s;return new _(function(p,y){var w=u._dbInfo;w.serializer.serialize(s,function(b,R){if(R)y(R);else try{localStorage.setItem(w.keyPrefix+r,b),p(c)}catch(M){(M.name==="QuotaExceededError"||M.name==="NS_ERROR_DOM_QUOTA_REACHED")&&y(M),y(M)}})})});return N(f,i),f}function xn(r,s){if(s=L.apply(this,arguments),r=typeof r!="function"&&r||{},!r.name){var i=this.config();r.name=r.name||i.name,r.storeName=r.storeName||i.storeName}var u=this,f;return r.name?f=new _(function(c){r.storeName?c(Jt(r,u._defaultConfig)):c(r.name+"/")}).then(function(c){for(var p=localStorage.length-1;p>=0;p--){var y=localStorage.key(p);y.indexOf(c)===0&&localStorage.removeItem(y)}}):f=_.reject("Invalid arguments"),N(f,s),f}var Un={_driver:"localStorageWrapper",_initStorage:Tn,_support:Rn(),iterate:On,getItem:Mn,setItem:Dn,removeItem:$n,clear:Nn,length:Cn,key:Ln,keys:Pn,dropInstance:xn},kn=function(s,i){return s===i||typeof s=="number"&&typeof i=="number"&&isNaN(s)&&isNaN(i)},Bn=function(s,i){for(var u=s.length,f=0;f<u;){if(kn(s[f],i))return!0;f++}return!1},Qt=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},Fe={},Zt={},Ne={INDEXEDDB:sn,WEBSQL:bn,LOCALSTORAGE:Un},Wn=[Ne.INDEXEDDB._driver,Ne.WEBSQL._driver,Ne.LOCALSTORAGE._driver],Ze=["dropInstance"],yt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ze),Fn={description:"",driver:Wn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Gn(r,s){r[s]=function(){var i=arguments;return r.ready().then(function(){return r[s].apply(r,i)})}}function Et(){for(var r=1;r<arguments.length;r++){var s=arguments[r];if(s)for(var i in s)s.hasOwnProperty(i)&&(Qt(s[i])?arguments[0][i]=s[i].slice():arguments[0][i]=s[i])}return arguments[0]}var jn=function(){function r(s){h(this,r);for(var i in Ne)if(Ne.hasOwnProperty(i)){var u=Ne[i],f=u._driver;this[i]=f,Fe[f]||this.defineDriver(u)}this._defaultConfig=Et({},Fn),this._config=Et({},this._defaultConfig,s),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return r.prototype.config=function(i){if((typeof i>"u"?"undefined":m(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var u in i){if(u==="storeName"&&(i[u]=i[u].replace(/\W/g,"_")),u==="version"&&typeof i[u]!="number")return new Error("Database version must be a number.");this._config[u]=i[u]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},r.prototype.defineDriver=function(i,u,f){var c=new _(function(p,y){try{var w=i._driver,b=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){y(b);return}for(var R=yt.concat("_initStorage"),M=0,B=R.length;M<B;M++){var q=R[M],K=!Bn(Ze,q);if((K||i[q])&&typeof i[q]!="function"){y(b);return}}var z=function(){for(var Ge=function(Kn){return function(){var Yn=new Error("Method "+Kn+" is not implemented by the current driver"),er=_.reject(Yn);return N(er,arguments[arguments.length-1]),er}},_t=0,Vn=Ze.length;_t<Vn;_t++){var It=Ze[_t];i[It]||(i[It]=Ge(It))}};z();var X=function(Ge){Fe[w]&&console.info("Redefining LocalForage driver: "+w),Fe[w]=i,Zt[w]=Ge,p()};"_support"in i?i._support&&typeof i._support=="function"?i._support().then(X,y):X(!!i._support):X(!0)}catch(ue){y(ue)}});return $(c,u,f),c},r.prototype.driver=function(){return this._driver||null},r.prototype.getDriver=function(i,u,f){var c=Fe[i]?_.resolve(Fe[i]):_.reject(new Error("Driver not found."));return $(c,u,f),c},r.prototype.getSerializer=function(i){var u=_.resolve(gt);return $(u,i),u},r.prototype.ready=function(i){var u=this,f=u._driverSet.then(function(){return u._ready===null&&(u._ready=u._initDriver()),u._ready});return $(f,i,i),f},r.prototype.setDriver=function(i,u,f){var c=this;Qt(i)||(i=[i]);var p=this._getSupportedDrivers(i);function y(){c._config.driver=c.driver()}function w(M){return c._extend(M),y(),c._ready=c._initStorage(c._config),c._ready}function b(M){return function(){var B=0;function q(){for(;B<M.length;){var K=M[B];return B++,c._dbInfo=null,c._ready=null,c.getDriver(K).then(w).catch(q)}y();var z=new Error("No available storage method found.");return c._driverSet=_.reject(z),c._driverSet}return q()}}var R=this._driverSet!==null?this._driverSet.catch(function(){return _.resolve()}):_.resolve();return this._driverSet=R.then(function(){var M=p[0];return c._dbInfo=null,c._ready=null,c.getDriver(M).then(function(B){c._driver=B._driver,y(),c._wrapLibraryMethodsWithReady(),c._initDriver=b(p)})}).catch(function(){y();var M=new Error("No available storage method found.");return c._driverSet=_.reject(M),c._driverSet}),$(this._driverSet,u,f),this._driverSet},r.prototype.supports=function(i){return!!Zt[i]},r.prototype._extend=function(i){Et(this,i)},r.prototype._getSupportedDrivers=function(i){for(var u=[],f=0,c=i.length;f<c;f++){var p=i[f];this.supports(p)&&u.push(p)}return u},r.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,u=yt.length;i<u;i++)Gn(this,yt[i])},r.prototype.createInstance=function(i){return new r(i)},r}(),qn=new jn;a.exports=qn},{3:3}]},{},[4])(4)})});var Qr=or((ut,Jr)=>{(function(e,t){typeof ut=="object"&&typeof Jr<"u"?t(ut):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],t):t(e.LocalforageDriverMemory={})})(typeof self<"u"?self:ut,function(e){"use strict";var t="localforage-driver-memory";function n(d){var I=typeof Symbol=="function"&&d[Symbol.iterator],A=0;return I?I.call(d):{next:function(){return d&&A>=d.length&&(d=void 0),{value:d&&d[A++],done:!d}}}}function o(d,I){d=d||[],I=I||{};try{return new Blob(d,I)}catch(x){if(x.name!=="TypeError")throw x;for(var A=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,P=new A,C=0;C<d.length;C+=1)P.append(d[C]);return P.getBlob(I.type)}}var a=/^~~local_forage_type~([^~]+)~/,l=9,m=l+4,h=Object.prototype.toString;function g(d){var I=d.length*.75,A=d.length;d[d.length-1]==="="&&(I--,d[d.length-2]==="="&&I--);for(var P=new ArrayBuffer(I),C=new Uint8Array(P),x=0,j=0;x<A;x+=4){var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[x]),Te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[x+1]),Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[x+2]),We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[x+3]);C[j++]=Z<<2|Te>>4,C[j++]=(Te&15)<<4|Ie>>2,C[j++]=(Ie&3)<<6|We&63}return P}function v(d){for(var I=new Uint8Array(d),A="",P=0;P<I.length;P+=3)A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[P]>>2],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[P]&3)<<4|I[P+1]>>4],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[P+1]&15)<<2|I[P+2]>>6],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[P+2]&63];return I.length%3===2?A=A.substring(0,A.length-1)+"=":I.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function E(d,I){var A="";if(d&&(A=h.call(d)),d&&(A==="[object ArrayBuffer]"||d.buffer&&h.call(d.buffer)==="[object ArrayBuffer]")){var P=void 0,C="__lfsc__:";d instanceof ArrayBuffer?(P=d,C+="arbf"):(P=d.buffer,A==="[object Int8Array]"?C+="si08":A==="[object Uint8Array]"?C+="ui08":A==="[object Uint8ClampedArray]"?C+="uic8":A==="[object Int16Array]"?C+="si16":A==="[object Uint16Array]"?C+="ur16":A==="[object Int32Array]"?C+="si32":A==="[object Uint32Array]"?C+="ui32":A==="[object Float32Array]"?C+="fl32":A==="[object Float64Array]"?C+="fl64":I(new Error("Failed to get type for BinaryArray"))),I(C+v(P))}else if(A==="[object Blob]"){var x=new FileReader;x.onload=function(){var j="~~local_forage_type~"+d.type+"~"+v(this.result);I("__lfsc__:blob"+j)},x.readAsArrayBuffer(d)}else try{I(JSON.stringify(d))}catch(j){console.error("Couldn't convert value into a JSON string: ",d),I(null,j)}}function T(d){if(d.substring(0,l)!=="__lfsc__:")return JSON.parse(d);var I=d.substring(m),A=d.substring(l,m),P;if(A==="blob"&&a.test(I)){var C=I.match(a);P=C[1],I=I.substring(C[0].length)}var x=g(I);switch(A){case"arbf":return x;case"blob":return o([x],{type:P});case"si08":return new Int8Array(x);case"ui08":return new Uint8Array(x);case"uic8":return new Uint8ClampedArray(x);case"si16":return new Int16Array(x);case"ur16":return new Uint16Array(x);case"si32":return new Int32Array(x);case"ui32":return new Uint32Array(x);case"fl32":return new Float32Array(x);case"fl64":return new Float64Array(x);default:throw new Error("Unkown type: "+A)}}function _(d){var I,A;if(d===null||typeof d!="object"||"isActiveClone"in d)return d;var P=d instanceof Date?new Date(d):d.constructor();try{for(var C=n(Object.keys(d)),x=C.next();!x.done;x=C.next()){var j=x.value;Object.prototype.hasOwnProperty.call(d,j)&&(d.isActiveClone=null,P[j]=_(d[j]),delete d.isActiveClone)}}catch(Z){I={error:Z}}finally{try{x&&!x.done&&(A=C.return)&&A.call(C)}finally{if(I)throw I.error}}return P}function N(d,I){return(d.name||I.name)+"/"+(d.storeName||I.storeName)+"/"}function $(d,I){I&&d.then(function(A){I(null,A)},function(A){I(A)})}function k(){for(var d=[],I=0;I<arguments.length;I++)d[I]=arguments[I];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function L(d,I){var A=this;if(I=k.apply(this,arguments),d=typeof d!="function"&&d||{},!d.name){var P=this.config();d.name=d.name||P.name,d.storeName=d.storeName||P.storeName}var C;return d.name?C=new Promise(function(x){d.storeName?x(N(d,A._defaultConfig)):x(d.name+"/")}):C=Promise.reject("Invalid arguments"),{promise:C,callback:I}}function F(d){return typeof d!="string"&&(console.warn(d+" used as a key, but it is not a string."),d=String(d)),d}var J={bufferToString:v,deserialize:T,serialize:E,stringToBuffer:g},D={},ve=function(){function d(I){this.kp=I,this.data={}}return d.resolve=function(I){return D[I]||(D[I]=new d(I)),D[I]},d.prototype.clear=function(){this.data={}},d.prototype.drop=function(){this.clear(),delete D[this.kp]},d.prototype.get=function(I){return this.data[I]},d.prototype.key=function(I){return this.keys()[I]},d.prototype.keys=function(){return Object.keys(this.data)},d.prototype.rm=function(I){delete this.data[I]},d.prototype.set=function(I,A){this.data[I]=A},d}();function ne(d){var I=d?_(d):{},A=N(I,this._defaultConfig),P=ve.resolve(A);return this._dbInfo=I,this._dbInfo.serializer=J,this._dbInfo.keyPrefix=A,this._dbInfo.mStore=P,Promise.resolve()}function S(d){var I=this,A=this.ready().then(function(){I._dbInfo.mStore.clear()});return $(A,d),A}function G(d,I){var A=L.apply(this,arguments),P=A.promise,C=A.callback,x=P.then(function(j){ve.resolve(j).drop()});return $(x,C),P}function U(d,I){var A=this;d=F(d);var P=this.ready().then(function(){var C=A._dbInfo.mStore.get(d);return C==null?null:A._dbInfo.serializer.deserialize(C)});return $(P,I),P}function V(d,I){var A=this,P=this.ready().then(function(){for(var C=A._dbInfo.mStore,x=C.keys(),j=0;j<x.length;j++){var Z=C.get(x[j]);if(Z&&(Z=A._dbInfo.serializer.deserialize(Z)),Z=d(Z,x[j],j+1),Z!==void 0)return Z}});return $(P,I),P}function Q(d,I){var A=this,P=this.ready().then(function(){var C;try{C=A._dbInfo.mStore.key(d),C===void 0&&(C=null)}catch{C=null}return C});return $(P,I),P}function ie(d){var I=this,A=this.ready().then(function(){return I._dbInfo.mStore.keys()});return $(A,d),A}function se(d){var I=this.keys().then(function(A){return A.length});return $(I,d),I}function le(d,I){var A=this;d=F(d);var P=this.ready().then(function(){A._dbInfo.mStore.rm(d)});return $(P,I),P}function fe(d,I,A){var P=this;d=F(d);var C=this.ready().then(function(){I===void 0&&(I=null);var x=I;return new Promise(function(j,Z){P._dbInfo.serializer.serialize(I,function(Te,Ie){if(Ie)Z(Ie);else try{P._dbInfo.mStore.set(d,Te),j(x)}catch(We){Z(We)}})})});return $(C,A),C}var _e=!0;e._support=_e,e._driver=t,e._initStorage=ne,e.clear=S,e.dropInstance=G,e.getItem=U,e.iterate=V,e.key=Q,e.keys=ie,e.length=se,e.removeItem=le,e.setItem=fe,Object.defineProperty(e,"__esModule",{value:!0})})});var Jo={};ar(Jo,{default:()=>zo});var de=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(de||{}),we=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(we||{}),Oe=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e[e.RedirectLoginComplete=-10015]="RedirectLoginComplete",e))(Oe||{}),ce=(e=>(e.MetaMask="metamask",e.CoinbaseWallet="coinbase_wallet",e))(ce||{}),Le=(e=>(e.WalletSelected="wallet_selected",e.WalletConnected="wallet_connected",e.WalletRejected="wallet_rejected",e))(Le||{}),O=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.SetAuthorizationToken="magic_auth_set_authorization_token",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="magic_get_info",e.ShowUI="magic_wallet",e.NFTPurchase="magic_nft_purchase",e.NFTCheckout="magic_nft_checkout",e.NFTTransfer="magic_nft_transfer",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e.MagicBoxHeartBeat="magic_box_heart_beat",e.AutoConnect="mc_auto_connect",e.Login="mc_login",e.EncryptV1="magic_auth_encrypt_v1",e.DecryptV1="magic_auth_decrypt_v1",e.ShowNFTs="magic_show_nfts",e.ShowOnRamp="magic_show_fiat_onramp",e.ShowSendTokensUI="magic_show_send_tokens_ui",e.ShowAddress="magic_show_address",e.ShowBalances="magic_show_balances",e.SendGaslessTransaction="eth_sendGaslessTransaction",e))(O||{}),he=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e))(he||{}),be=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(be||{}),cr=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(cr||{}),ur=(e=>(e.Retry="retry",e))(ur||{}),fr=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(fr||{}),Re=(e=>(e.VerifyEmailOtp="verify-email-otp",e.Cancel="cancel",e))(Re||{}),dr=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e.ExpiredEmailOtp="expired-email-otp",e))(dr||{}),Ve=(e=>(e.Retry="device-retry",e))(Ve||{}),hr=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(hr||{}),pr=(e=>(e.Harmony="HARMONY",e))(pr||{}),mr=(e=>(e.PhoneNumber="phone_number",e))(mr||{});var ei=Object.create,lt=Object.defineProperty,ti=Object.defineProperties,ri=Object.getOwnPropertyDescriptor,ni=Object.getOwnPropertyDescriptors,ii=Object.getOwnPropertyNames,vr=Object.getOwnPropertySymbols,oi=Object.getPrototypeOf,Or=Object.prototype.hasOwnProperty,ai=Object.prototype.propertyIsEnumerable,gr=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,At=(e,t)=>{for(var n in t||(t={}))Or.call(t,n)&&gr(e,n,t[n]);if(vr)for(var n of vr(t))ai.call(t,n)&&gr(e,n,t[n]);return e},Lr=(e,t)=>ti(e,ni(t)),si=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),li=(e,t)=>{for(var n in t)lt(e,n,{get:t[n],enumerable:!0})},ci=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of ii(t))!Or.call(e,a)&&a!==n&&lt(e,a,{get:()=>t[a],enumerable:!(o=ri(t,a))||o.enumerable});return e},ui=(e,t,n)=>(n=e!=null?ei(oi(e)):{},ci(t||!e||!e.__esModule?lt(n,"default",{value:e,enumerable:!0}):n,e)),ae=(e,t,n)=>new Promise((o,a)=>{var l=g=>{try{h(n.next(g))}catch(v){a(v)}},m=g=>{try{h(n.throw(g))}catch(v){a(v)}},h=g=>g.done?o(g.value):Promise.resolve(g.value).then(l,m);h((n=n.apply(e,t)).next())}),fi=si((e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty,o="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(o=!1));function l(v,E,T){this.fn=v,this.context=E,this.once=T||!1}function m(v,E,T,_,N){if(typeof T!="function")throw new TypeError("The listener must be a function");var $=new l(T,_||v,N),k=o?o+E:E;return v._events[k]?v._events[k].fn?v._events[k]=[v._events[k],$]:v._events[k].push($):(v._events[k]=$,v._eventsCount++),v}function h(v,E){--v._eventsCount===0?v._events=new a:delete v._events[E]}function g(){this._events=new a,this._eventsCount=0}g.prototype.eventNames=function(){var v=[],E,T;if(this._eventsCount===0)return v;for(T in E=this._events)n.call(E,T)&&v.push(o?T.slice(1):T);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(E)):v},g.prototype.listeners=function(v){var E=o?o+v:v,T=this._events[E];if(!T)return[];if(T.fn)return[T.fn];for(var _=0,N=T.length,$=new Array(N);_<N;_++)$[_]=T[_].fn;return $},g.prototype.listenerCount=function(v){var E=o?o+v:v,T=this._events[E];return T?T.fn?1:T.length:0},g.prototype.emit=function(v,E,T,_,N,$){var k=o?o+v:v;if(!this._events[k])return!1;var L=this._events[k],F=arguments.length,J,D;if(L.fn){switch(L.once&&this.removeListener(v,L.fn,void 0,!0),F){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,E),!0;case 3:return L.fn.call(L.context,E,T),!0;case 4:return L.fn.call(L.context,E,T,_),!0;case 5:return L.fn.call(L.context,E,T,_,N),!0;case 6:return L.fn.call(L.context,E,T,_,N,$),!0}for(D=1,J=new Array(F-1);D<F;D++)J[D-1]=arguments[D];L.fn.apply(L.context,J)}else{var ve=L.length,ne;for(D=0;D<ve;D++)switch(L[D].once&&this.removeListener(v,L[D].fn,void 0,!0),F){case 1:L[D].fn.call(L[D].context);break;case 2:L[D].fn.call(L[D].context,E);break;case 3:L[D].fn.call(L[D].context,E,T);break;case 4:L[D].fn.call(L[D].context,E,T,_);break;default:if(!J)for(ne=1,J=new Array(F-1);ne<F;ne++)J[ne-1]=arguments[ne];L[D].fn.apply(L[D].context,J)}}return!0},g.prototype.on=function(v,E,T){return m(this,v,E,T,!1)},g.prototype.once=function(v,E,T){return m(this,v,E,T,!0)},g.prototype.removeListener=function(v,E,T,_){var N=o?o+v:v;if(!this._events[N])return this;if(!E)return h(this,N),this;var $=this._events[N];if($.fn)$.fn===E&&(!_||$.once)&&(!T||$.context===T)&&h(this,N);else{for(var k=0,L=[],F=$.length;k<F;k++)($[k].fn!==E||_&&!$[k].once||T&&$[k].context!==T)&&L.push($[k]);L.length?this._events[N]=L.length===1?L[0]:L:h(this,N)}return this},g.prototype.removeAllListeners=function(v){var E;return v?(E=o?o+v:v,this._events[E]&&h(this,E)):(this._events=new a,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prefixed=o,g.EventEmitter=g,typeof t<"u"&&(t.exports=g)});function di(e){let t={exports:{}};return e(t,t.exports),t.exports}var hi=Number.MAX_SAFE_INTEGER||9007199254740991,St={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:hi,MAX_SAFE_COMPONENT_LENGTH:16},pi=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},Y=pi,Je=di(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n}=St,o=(t=e.exports={}).re=[],a=t.src=[],l=t.t={},m=0,h=(g,v,E)=>{let T=m++;Y(T,v),l[g]=T,a[T]=v,o[T]=new RegExp(v,E?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","[0-9]+"),h("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),h("MAINVERSION",`(${a[l.NUMERICIDENTIFIER]})\\.(${a[l.NUMERICIDENTIFIER]})\\.(${a[l.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${a[l.NUMERICIDENTIFIERLOOSE]})\\.(${a[l.NUMERICIDENTIFIERLOOSE]})\\.(${a[l.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${a[l.NUMERICIDENTIFIER]}|${a[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${a[l.NUMERICIDENTIFIERLOOSE]}|${a[l.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${a[l.PRERELEASEIDENTIFIER]}(?:\\.${a[l.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${a[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[l.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER","[0-9A-Za-z-]+"),h("BUILD",`(?:\\+(${a[l.BUILDIDENTIFIER]}(?:\\.${a[l.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${a[l.MAINVERSION]}${a[l.PRERELEASE]}?${a[l.BUILD]}?`),h("FULL",`^${a[l.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${a[l.MAINVERSIONLOOSE]}${a[l.PRERELEASELOOSE]}?${a[l.BUILD]}?`),h("LOOSE",`^${a[l.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${a[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${a[l.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${a[l.XRANGEIDENTIFIER]})(?:\\.(${a[l.XRANGEIDENTIFIER]})(?:\\.(${a[l.XRANGEIDENTIFIER]})(?:${a[l.PRERELEASE]})?${a[l.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${a[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[l.XRANGEIDENTIFIERLOOSE]})(?:${a[l.PRERELEASELOOSE]})?${a[l.BUILD]}?)?)?`),h("XRANGE",`^${a[l.GTLT]}\\s*${a[l.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${a[l.GTLT]}\\s*${a[l.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",a[l.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${a[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${a[l.LONETILDE]}${a[l.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${a[l.LONETILDE]}${a[l.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${a[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${a[l.LONECARET]}${a[l.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${a[l.LONECARET]}${a[l.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${a[l.GTLT]}\\s*(${a[l.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${a[l.GTLT]}\\s*(${a[l.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${a[l.GTLT]}\\s*(${a[l.LOOSEPLAIN]}|${a[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${a[l.XRANGEPLAIN]})\\s+-\\s+(${a[l.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${a[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[l.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0.0.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),yr=/^[0-9]+$/,Pr=(e,t)=>{let n=yr.test(e),o=yr.test(t);return n&&o&&(e=+e,t=+t),e===t?0:n&&!o?-1:o&&!n?1:e<t?-1:1},mi=(e,t)=>Pr(t,e),vi={compareIdentifiers:Pr,rcompareIdentifiers:mi},{MAX_LENGTH:Er,MAX_SAFE_INTEGER:et}=St,{re:_r,t:Ir}=Je,{compareIdentifiers:Ke}=vi,ee=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof ee){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Er)throw new TypeError(`version is longer than ${Er} characters`);Y("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?_r[Ir.LOOSE]:_r[Ir.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>et||this.major<0)throw new TypeError("Invalid major version");if(this.minor>et||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>et||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let a=+o;if(a>=0&&a<et)return a}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Y("SemVer.compare",this.version,this.options,e),!(e instanceof ee)){if(typeof e=="string"&&e===this.version)return 0;e=new ee(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ee||(e=new ee(e,this.options)),Ke(this.major,e.major)||Ke(this.minor,e.minor)||Ke(this.patch,e.patch)}comparePre(e){if(e instanceof ee||(e=new ee(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],o=e.prerelease[t];if(Y("prerelease compare",t,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n!==o)return Ke(n,o)}while(++t)}compareBuild(e){e instanceof ee||(e=new ee(e,this.options));let t=0;do{let n=this.build[t],o=e.build[t];if(Y("prerelease compare",t,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n!==o)return Ke(n,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},gi=(e,t,n)=>new ee(e,n).compare(new ee(t,n)),ke=gi,yi=(e,t,n)=>ke(e,t,n)===0,Ei=yi,_i=(e,t,n)=>ke(e,t,n)!==0,Ii=_i,wi=(e,t,n)=>ke(e,t,n)>0,bi=wi,Ri=(e,t,n)=>ke(e,t,n)>=0,Ai=Ri,Si=(e,t,n)=>ke(e,t,n)<0,Ti=Si,Ni=(e,t,n)=>ke(e,t,n)<=0,Mi=Ni,Oi=(e,t,n,o)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Ei(e,n,o);case"!=":return Ii(e,n,o);case">":return bi(e,n,o);case">=":return Ai(e,n,o);case"<":return Ti(e,n,o);case"<=":return Mi(e,n,o);default:throw new TypeError(`Invalid operator: ${t}`)}},wt=Oi,Ye=Symbol("SemVer ANY"),Xe=class{static get ANY(){return Ye}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Xe){if(e.loose===!!t.loose)return e;e=e.value}Y("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ye?this.value="":this.value=this.operator+this.semver.version,Y("comp",this)}parse(e){let t=this.options.loose?wr[br.COMPARATORLOOSE]:wr[br.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new ee(n[2],this.options.loose):this.semver=Ye}toString(){return this.value}test(e){if(Y("Comparator.test",e,this.options.loose),this.semver===Ye||e===Ye)return!0;if(typeof e=="string")try{e=new ee(e,this.options)}catch(t){return!1}return wt(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Xe))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Ce(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Ce(this.value,t).test(e.semver);let n=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),o=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),a=this.semver.version===e.semver.version,l=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),m=wt(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),h=wt(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||o||a&&l||m||h}},{re:wr,t:br}=Je,Ce=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ce)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Ce(e.raw,t);if(e instanceof Xe)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let n=t?re[te.HYPHENRANGELOOSE]:re[te.HYPHENRANGE];e=e.replace(n,ji(this.options.includePrerelease)),Y("hyphen replace",e),e=e.replace(re[te.COMPARATORTRIM],Li),Y("comparator trim",e,re[te.COMPARATORTRIM]),e=(e=(e=e.replace(re[te.TILDETRIM],Pi)).replace(re[te.CARETTRIM],Ci)).split(/\s+/).join(" ");let o=t?re[te.COMPARATORLOOSE]:re[te.COMPARATOR];return e.split(" ").map(a=>$i(a,this.options)).join(" ").split(/\s+/).map(a=>Gi(a,this.options)).filter(this.options.loose?a=>!!a.match(o):()=>!0).map(a=>new Xe(a,this.options))}intersects(e,t){if(!(e instanceof Ce))throw new TypeError("a Range is required");return this.set.some(n=>Rr(n,t)&&e.set.some(o=>Rr(o,t)&&n.every(a=>o.every(l=>a.intersects(l,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ee(e,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(qi(this.set[t],e,this.options))return!0;return!1}},{re,t:te,comparatorTrimReplace:Li,tildeTrimReplace:Pi,caretTrimReplace:Ci}=Je,Rr=(e,t)=>{let n=!0,o=e.slice(),a=o.pop();for(;n&&o.length;)n=o.every(l=>a.intersects(l,t)),a=o.pop();return n},$i=(e,t)=>(Y("comp",e,t),e=Ui(e,t),Y("caret",e),e=Di(e,t),Y("tildes",e),e=Bi(e,t),Y("xrange",e),e=Fi(e,t),Y("stars",e),e),oe=e=>!e||e.toLowerCase()==="x"||e==="*",Di=(e,t)=>e.trim().split(/\s+/).map(n=>xi(n,t)).join(" "),xi=(e,t)=>{let n=t.loose?re[te.TILDELOOSE]:re[te.TILDE];return e.replace(n,(o,a,l,m,h)=>{let g;return Y("tilde",e,o,a,l,m,h),oe(a)?g="":oe(l)?g=`>=${a}.0.0 <${+a+1}.0.0-0`:oe(m)?g=`>=${a}.${l}.0 <${a}.${+l+1}.0-0`:h?(Y("replaceTilde pr",h),g=`>=${a}.${l}.${m}-${h} <${a}.${+l+1}.0-0`):g=`>=${a}.${l}.${m} <${a}.${+l+1}.0-0`,Y("tilde return",g),g})},Ui=(e,t)=>e.trim().split(/\s+/).map(n=>ki(n,t)).join(" "),ki=(e,t)=>{Y("caret",e,t);let n=t.loose?re[te.CARETLOOSE]:re[te.CARET],o=t.includePrerelease?"-0":"";return e.replace(n,(a,l,m,h,g)=>{let v;return Y("caret",e,a,l,m,h,g),oe(l)?v="":oe(m)?v=`>=${l}.0.0${o} <${+l+1}.0.0-0`:oe(h)?v=l==="0"?`>=${l}.${m}.0${o} <${l}.${+m+1}.0-0`:`>=${l}.${m}.0${o} <${+l+1}.0.0-0`:g?(Y("replaceCaret pr",g),v=l==="0"?m==="0"?`>=${l}.${m}.${h}-${g} <${l}.${m}.${+h+1}-0`:`>=${l}.${m}.${h}-${g} <${l}.${+m+1}.0-0`:`>=${l}.${m}.${h}-${g} <${+l+1}.0.0-0`):(Y("no pr"),v=l==="0"?m==="0"?`>=${l}.${m}.${h}${o} <${l}.${m}.${+h+1}-0`:`>=${l}.${m}.${h}${o} <${l}.${+m+1}.0-0`:`>=${l}.${m}.${h} <${+l+1}.0.0-0`),Y("caret return",v),v})},Bi=(e,t)=>(Y("replaceXRanges",e,t),e.split(/\s+/).map(n=>Wi(n,t)).join(" ")),Wi=(e,t)=>{e=e.trim();let n=t.loose?re[te.XRANGELOOSE]:re[te.XRANGE];return e.replace(n,(o,a,l,m,h,g)=>{Y("xRange",e,o,a,l,m,h,g);let v=oe(l),E=v||oe(m),T=E||oe(h),_=T;return a==="="&&_&&(a=""),g=t.includePrerelease?"-0":"",v?o=a===">"||a==="<"?"<0.0.0-0":"*":a&&_?(E&&(m=0),h=0,a===">"?(a=">=",E?(l=+l+1,m=0,h=0):(m=+m+1,h=0)):a==="<="&&(a="<",E?l=+l+1:m=+m+1),a==="<"&&(g="-0"),o=`${a+l}.${m}.${h}${g}`):E?o=`>=${l}.0.0${g} <${+l+1}.0.0-0`:T&&(o=`>=${l}.${m}.0${g} <${l}.${+m+1}.0-0`),Y("xRange return",o),o})},Fi=(e,t)=>(Y("replaceStars",e,t),e.trim().replace(re[te.STAR],"")),Gi=(e,t)=>(Y("replaceGTE0",e,t),e.trim().replace(re[t.includePrerelease?te.GTE0PRE:te.GTE0],"")),ji=e=>(t,n,o,a,l,m,h,g,v,E,T,_,N)=>`${n=oe(o)?"":oe(a)?`>=${o}.0.0${e?"-0":""}`:oe(l)?`>=${o}.${a}.0${e?"-0":""}`:m?`>=${n}`:`>=${n}${e?"-0":""}`} ${g=oe(v)?"":oe(E)?`<${+v+1}.0.0-0`:oe(T)?`<${v}.${+E+1}.0-0`:_?`<=${v}.${E}.${T}-${_}`:e?`<${v}.${E}.${+T+1}-0`:`<=${g}`}`.trim(),qi=(e,t,n)=>{for(let o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let o=0;o<e.length;o++)if(Y(e[o].semver),e[o].semver!==Xe.ANY&&e[o].semver.prerelease.length>0){let a=e[o].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0},Vi=(e,t,n)=>{try{t=new Ce(t,n)}catch(o){return!1}return t.test(e)},{MAX_LENGTH:Ki}=St,{re:Ar,t:Sr}=Je,Yi=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof ee)return e;if(typeof e!="string"||e.length>Ki||!(t.loose?Ar[Sr.LOOSE]:Ar[Sr.FULL]).test(e))return null;try{return new ee(e,t)}catch(n){return null}},Hi=Yi,{re:tt,t:rt}=Je,Xi=(e,t)=>{if(e instanceof ee)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let n=null;if((t=t||{}).rtl){let o;for(;(o=tt[rt.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&o.index+o[0].length===n.index+n[0].length||(n=o),tt[rt.COERCERTL].lastIndex=o.index+o[1].length+o[2].length;tt[rt.COERCERTL].lastIndex=-1}else n=e.match(tt[rt.COERCE]);return n===null?null:Hi(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};function zi(e){return String.fromCharCode(parseInt(e.slice(1),16))}function Ji(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function Qi(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,zi))}function Zi(e){return decodeURIComponent(Array.from(atob(e),Ji).join(""))}function Cr(e){return Qi(JSON.stringify(e))}function eo(e){return JSON.parse(Zi(e))}function He(e){return typeof e=="undefined"}function to(e){return e===null}function $r(e){return to(e)||He(e)}function ro(e){return $r(e)?!1:!He(e.jsonrpc)&&!He(e.id)&&(!He(e.result)||!He(e.error))}function no(e){return $r(e)?!1:typeof e=="number"&&Object.values(Oe).includes(e)}function bt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var H={};function Dr(e,t){return Object.assign(H,t),e}var io={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},me=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,me.prototype)}},xe=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=no(t)?t:Oe.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(e==null?void 0:e.data)||void 0,Object.setPrototypeOf(this,xe.prototype)}},Be=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},ct=class extends Error{constructor(e,t,n,o){super(`Magic Extension Error (${e.name}): [${t}] ${n}`),this.code=t,this.rawMessage=n,this.data=o,this.__proto__=Error,Object.setPrototypeOf(this,ct.prototype)}},at=class{constructor(e,t,n){this.code=t,this.rawMessage=n,this.message=`Magic Extension Warning (${e.name}): [${t}] ${n}`}log(){console.warn(this.message)}};function oo(){return new me(de.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Tt(){return new me(de.ModalNotReady,"Modal is not ready.")}function ao(){return new me(de.MalformedResponse,"Response from the Magic iframe is malformed.")}function so(e){return new me(de.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function lo(e){let t=`Some extensions are incompatible with \`${H.sdkName}@${H.version}\`:`;return e.filter(n=>typeof n.compat!="undefined"&&n.compat!==null).forEach(n=>{let o=n.compat[H.sdkName];typeof o=="string"?t+=`
  - Extension \`${n.name}\` supports version(s) \`${o}\``:o||(t+=`
  - Extension \`${n.name}\` does not support ${H.platform} environments.`)}),new me(de.IncompatibleExtensions,t)}function co(e){let t=n=>{let o=n+1,a=o%10,l=o%100;return a===1&&l!==11?`${o}st`:a===2&&l!==12?`${o}nd`:a===3&&l!==13?`${o}rd`:`${o}th`};return new me(de.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function xr(){return new Be(we.DuplicateIframe,"Duplicate iframes found.")}function uo(){return new Be(we.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function fo(){return new Be(we.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${H.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function $e(e){let{method:t,removalVersions:n,useInstead:o}=e,a=n[H.sdkName],l=o?` Use \`${o}\` instead.`:"",m=`\`${t}\` will be removed from \`${H.sdkName}\` in version \`${a}\`.${l}`;return new Be(we.DeprecationNotice,m)}function*ho(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var po=ho();function Ur(){return po.next().value}var kr=Symbol("Payload pre-processed by Magic SDK");function Br(e){return Object.defineProperty(e,kr,{value:!0,enumerable:!1}),e}function mo(e){return!!e[kr]}function st(e){var t,n,o;return mo(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=Ur(),e.method=(n=e.method)!=null?n:"noop",e.params=(o=e.params)!=null?o:[],Br(e)),e}function W(e,t=[]){return Br({params:t,method:e,jsonrpc:"2.0",id:Ur()})}var Nt=class{constructor(e){e instanceof Nt?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):ro(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error!="undefined"&&this._error!==null}get hasResult(){return typeof this._result!="undefined"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},vo=ui(fi()),go=class extends vo.default{};function Wr(){let e=new go;return{emitter:e,createChainingEmitterMethod:(t,n)=>(...o)=>(e[t].apply(e,o),n),createBoundEmitterMethod:t=>(...n)=>e[t].apply(e,n)}}var Fr=Symbol("isPromiEvent");function Mt(e){return!!e[Fr]}function Ot(e){let t=Gr(e),{createBoundEmitterMethod:n,createChainingEmitterMethod:o}=Wr(),a=Symbol("Promise.then"),l=Symbol("Promise.catch"),m=Symbol("Promise.finally"),h=(E,T)=>(..._)=>{let N=T[E].apply(T,_);return g(N)},g=E=>Object.assign(E,{[Fr]:!0,[a]:E[a]||E.then,[l]:E[l]||E.catch,[m]:E[m]||E.finally,then:h(a,E),catch:h(l,E),finally:h(m,E),on:o("on",E),once:o("once",E),addListener:o("addListener",E),off:o("off",E),removeListener:o("removeListener",E),removeAllListeners:o("removeAllListeners",E),emit:n("emit"),eventNames:n("eventNames"),listeners:n("listeners"),listenerCount:n("listenerCount")}),v=g(t.then(E=>(v.emit("done",E),v.emit("settled"),E),E=>{throw v.emit("error",E),v.emit("settled"),E}));return v}function Gr(e){return new Promise((t,n)=>{let o=e(t,n);Promise.resolve(o).catch(n)})}var Se=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(be.MAGIC_HANDLE_REQUEST,st(e)),n=Ot((a,l)=>{t.then(m=>{if(o(),m.hasError)l(new xe(m.payload.error));else if(m.hasResult)a(m.payload.result);else throw ao()}).catch(m=>{o(),l(m)})}),o=this.overlay.on(he.MAGIC_HANDLE_EVENT,a=>{var l;let{response:m}=a.data;if(m.id===e.id&&((l=m.result)==null?void 0:l.event)){let{event:h,params:g=[]}=m.result;n.emit(h,...g)}});return n}createIntermediaryEvent(e,t){return n=>{let o=W(O.IntermediaryEvent,[{payloadId:t,eventType:e,args:n}]);this.request(o)}}};function yo(e,t){let[n]=e.split(".").map(Number);return n>=t}var De={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},Eo=class extends Se{loginWithMagicLink(e){let t=H.sdkName==="@magic-sdk/react-native"||H.sdkName==="@magic-sdk/react-native-bare"||H.sdkName==="@magic-sdk/react-native-expo";if(t&&yo(H.version,19))throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");t&&$e({method:"auth.loginWithMagicLink()",removalVersions:De,useInstead:"auth.loginWithEmailOTP()"}).log();let{email:n,showUI:o=!0,redirectURI:a,overrides:l}=e,m=W(this.sdk.testMode?O.LoginWithMagicLinkTestMode:O.LoginWithMagicLink,[{email:n,showUI:o,redirectURI:a,overrides:l}]);return this.request(m)}loginWithSMS(e){let{phoneNumber:t}=e,n=W(this.sdk.testMode?O.LoginWithSmsTestMode:O.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(n)}loginWithEmailOTP(e){let{email:t,showUI:n,deviceCheckUI:o,overrides:a}=e,l=W(this.sdk.testMode?O.LoginWithEmailOTPTestMode:O.LoginWithEmailOTP,[{email:t,showUI:n,deviceCheckUI:o,overrides:a}]),m=this.request(l);return!o&&m&&m.on(Ve.Retry,()=>{this.createIntermediaryEvent(Ve.Retry,l.id)()}),!n&&m&&(m.on(Re.VerifyEmailOtp,h=>{this.createIntermediaryEvent(Re.VerifyEmailOtp,l.id)(h)}),m.on(Re.Cancel,()=>{this.createIntermediaryEvent(Re.Cancel,l.id)()})),m}loginWithCredential(e){let t=e!=null?e:"";if(!e&&H.platform==="web"){t=window.location.search;let o=window.location.origin+window.location.pathname;window.history.replaceState(null,"",o)}let n=W(this.sdk.testMode?O.LoginWithCredentialTestMode:O.LoginWithCredential,[t]);return this.request(n)}setAuthorizationToken(e){let t=W(O.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){let{email:t,showUI:n=!0}=e,o=W(this.sdk.testMode?O.UpdateEmailTestMode:O.UpdateEmail,[{email:t,showUI:n}]);return this.request(o)}},jr={};li(jr,{clear:()=>_o,getItem:()=>pe,iterate:()=>Ro,key:()=>wo,keys:()=>bo,length:()=>Io,removeItem:()=>Lt,setItem:()=>Ue});var nt;function Ee(e){return(...t)=>ae(this,null,function*(){return nt||(nt=yield H.configureStorage()),yield nt.ready(),nt[e](...t)})}var pe=Ee("getItem"),Ue=Ee("setItem"),Lt=Ee("removeItem"),_o=Ee("clear"),Io=Ee("length"),wo=Ee("key"),bo=Ee("keys"),Ro=Ee("iterate"),Ao=class extends Se{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}getIdToken(e){let t=W(this.sdk.testMode?O.GetIdTokenTestMode:O.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=W(this.sdk.testMode?O.GenerateIdTokenTestMode:O.GenerateIdToken,[e]);return this.request(t)}getInfo(){return ae(this,null,function*(){let e=yield pe(this.localForageKey),t=W(O.GetInfo,[{walletType:e}]);return this.request(t)})}isLoggedIn(){let e=W(this.sdk.testMode?O.IsLoggedInTestMode:O.IsLoggedIn);return this.request(e)}logout(){Lt(this.localForageKey);let e=W(this.sdk.testMode?O.LogoutTestMode:O.Logout);return this.request(e)}requestInfoWithUI(e){let t=W(O.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}showSettings(e){let t=W(this.sdk.testMode?O.UserSettingsTestMode:O.UserSettings,[e]);return this.request(t)}recoverAccount(e){let t=W(this.sdk.testMode?O.RecoverAccountTestMode:O.RecoverAccount,[e]);return this.request(t)}getMetadata(){$e({method:"user.getMetadata()",removalVersions:De,useInstead:"user.getInfo()"}).log();let e=W(this.sdk.testMode?O.GetMetadataTestMode:O.GetMetadata);return this.request(e)}updateEmail(e){$e({method:"user.updateEmail()",removalVersions:De,useInstead:"auth.updateEmailWithUI()"}).log();let{email:t,showUI:n=!0}=e,o=W(this.sdk.testMode?O.UpdateEmailTestMode:O.UpdateEmail,[{email:t,showUI:n}]);return this.request(o)}};function ze(e,t){return t?new URL(e,t):new URL(e)}function So(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var qr="STORE_KEY_PRIVATE_KEY",Rt="STORE_KEY_PUBLIC_JWK",Vr="ECDSA",To="P-256",No={name:Vr,namedCurve:To};function Mo(){return ae(this,null,function*(){let e=yield Oo();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,n=yield pe(qr);if(!n||!t){console.info("unable to find private key or webcrypto unsupported");return}let o={iat:Math.floor(new Date().getTime()/1e3),jti:So()},a={typ:"dpop+jwt",alg:"ES256",jwk:e},l={protected:Tr(JSON.stringify(a)),claims:Tr(JSON.stringify(o))},m=Co(`${l.protected}.${l.claims}`),h={name:Vr,hash:{name:"SHA-256"}},g=Do(new Uint8Array(yield t.sign(h,n,m)));return`${l.protected}.${l.claims}.${g}`})}function Oo(){return ae(this,null,function*(){if(!Po()){console.info("webcrypto is not supported");return}return(yield pe(Rt))||(yield Lo()),pe(Rt)})}function Lo(){return ae(this,null,function*(){let{subtle:e}=window.crypto,t=yield e.generateKey(No,!1,["sign"]),n=yield e.exportKey("jwk",t.publicKey);yield Ue(qr,t.privateKey),yield Ue(Rt,n)})}function Po(){let e=typeof window!="undefined"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function Tr(e){return Kr($o(e))}function Co(e){return new TextEncoder().encode(e)}function Kr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function $o(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}function Do(e){let t="";return e.forEach(n=>{t+=String.fromCharCode(n)}),Kr(t)}var xo=class extends Se{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}connectWithUI(){let e=Ot((t,n)=>ae(this,null,function*(){try{if(this.isMetaMaskBrowser()&&(yield this.isWalletEnabled(ce.MetaMask))){let h=yield this.autoConnectIfWalletBrowser(ce.MetaMask);t(h);return}if(this.isCoinbaseWalletBrowser()&&(yield this.isWalletEnabled(ce.CoinbaseWallet))){let h=yield this.autoConnectIfWalletBrowser(ce.CoinbaseWallet);t(h);return}let o=this.getUserEnv(),a=W(O.Login,[o]),l=this.request(a);l.on(Le.WalletSelected,h=>this.handleWalletSelected(Lr(At({},h),{payloadId:a.id}))),l.on("id-token-created",h=>{e.emit("id-token-created",h)});let m=yield l;m.error&&n(m),t(m)}catch(o){n(o)}}));return e}showUI(){return this.request(W(O.ShowUI))}showAddress(){return this.request(W(O.ShowAddress))}showSendTokensUI(){return this.request(W(O.ShowSendTokensUI))}showOnRamp(){return this.request(W(O.ShowOnRamp))}showNFTs(){return this.request(W(O.ShowNFTs))}showBalances(){return this.request(W(O.ShowBalances))}sendGaslessTransaction(e,t){return this.request(W(O.SendGaslessTransaction,[e,t]))}getInfo(){return ae(this,null,function*(){$e({method:"wallet.getInfo()",removalVersions:De,useInstead:"user.getInfo()"}).log();let e=yield pe(this.localForageKey),t=W(O.GetInfo,[{walletType:e}]);return this.request(t)})}disconnect(){$e({method:"wallet.disconnect()",removalVersions:De,useInstead:"user.logout()"}).log(),Lt(this.localForageKey);let e=W(O.Disconnect);return this.request(e)}requestUserInfoWithUI(e){$e({method:"wallet.requestUserInfoWithUI()",removalVersions:De,useInstead:"user.requestUserInfoWithUI()"}).log();let t=W(O.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}getProvider(){return ae(this,null,function*(){switch(yield pe(this.localForageKey)){case ce.MetaMask:return this.getMetaMaskProvider();case ce.CoinbaseWallet:return this.getCoinbaseProvider();default:return this.sdk.rpcProvider}})}isMetaMaskInstalled(){var e,t,n;return((e=window.ethereum)==null?void 0:e.isMetaMask)||!!((n=(t=window.ethereum)==null?void 0:t.providers)!=null&&n.find(o=>o==null?void 0:o.isMetaMask))}isMetaMaskBrowser(){return this.isMobile()&&this.isMetaMaskInstalled()}getMetaMaskProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(n=>n==null?void 0:n.isMetaMask))||window.ethereum}connectToMetaMask(){if(this.isMobile()&&!this.isMetaMaskInstalled()){let e=`https://metamask.app.link/dapp/${window.location.href.replace(/(^\w+:|^)\/\//,"")}`;window.location.href=e}return this.getMetaMaskProvider().request({method:"eth_requestAccounts"})}isCoinbaseWalletInstalled(){var e,t,n;return((e=window.ethereum)==null?void 0:e.isCoinbaseWallet)||!!((n=(t=window.ethereum)==null?void 0:t.providers)!=null&&n.find(o=>o==null?void 0:o.isCoinbaseWallet))}isCoinbaseWalletBrowser(){var e;return!!((e=window.ethereum)!=null&&e.isCoinbaseBrowser)}getCoinbaseProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(n=>n==null?void 0:n.isCoinbaseWallet))||window.ethereum}connectToCoinbaseWallet(){if(this.isMobile()&&!this.isCoinbaseWalletBrowser()){let e=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(window.location.href)}`;window.location.href=e}return this.getCoinbaseProvider().request({method:"eth_requestAccounts"})}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Silk|Opera Mini/i.test(navigator.userAgent)}getUserEnv(){return{env:{isMetaMaskInstalled:this.isMetaMaskInstalled(),isCoinbaseWalletInstalled:this.isCoinbaseWalletInstalled()}}}connectToThirdPartyWallet(e){switch(e){case ce.MetaMask:return this.connectToMetaMask();case ce.CoinbaseWallet:return this.connectToCoinbaseWallet();default:throw new Error(`Invalid provider: ${e}. Must be one of "metamask" or "coinbase_wallet".`)}}isWalletEnabled(e){let t=W("mc_is_wallet_enabled",[{wallet:e}]);return this.request(t)}handleWalletSelected(e){return ae(this,null,function*(){try{let t=yield this.connectToThirdPartyWallet(e.wallet);yield Ue(this.localForageKey,e.wallet),this.createIntermediaryEvent(Le.WalletConnected,e.payloadId)(t)}catch(t){console.error(t),this.createIntermediaryEvent(Le.WalletRejected,e.payloadId)()}})}autoConnectIfWalletBrowser(e){return ae(this,null,function*(){let t;e===ce.MetaMask&&(t=yield this.getMetaMaskProvider().request({method:"eth_requestAccounts"})),e===ce.CoinbaseWallet&&(t=yield this.getCoinbaseProvider().request({method:"eth_requestAccounts"})),yield Ue(this.localForageKey,e);let n=W(O.AutoConnect,[{wallet:e,address:t}]);return this.request(n)})}},{createBoundEmitterMethod:it,createChainingEmitterMethod:Pe}=Wr(),Uo=class extends Se{constructor(){super(...arguments),this.isMagic=!0,this.on=Pe("on",this),this.once=Pe("once",this),this.addListener=Pe("addListener",this),this.off=Pe("off",this),this.removeListener=Pe("removeListener",this),this.removeAllListeners=Pe("removeAllListeners",this),this.emit=it("emit"),this.eventNames=it("eventNames"),this.listeners=it("listeners"),this.listenerCount=it("listenerCount")}sendAsync(e,t){if(!t)throw co({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(be.MAGIC_HANDLE_REQUEST,e.map(n=>{let o=st(n);return this.prefixPayloadMethodForTestMode(o),o})).then(n=>{t(null,n.map(o=>Lr(At({},o.payload),{error:o.hasError?new xe(o.payload.error):null})))});else{let n=st(e);this.prefixPayloadMethodForTestMode(n),this.overlay.post(be.MAGIC_HANDLE_REQUEST,n).then(o=>{t(o.hasError?new xe(o.payload.error):null,o.payload)})}}send(e,t){if(typeof e=="string"){let o=W(e,Array.isArray(t)?t:[]);return this.request(o)}if(Array.isArray(e)||!!t){this.sendAsync(e,t);return}let n=uo();return n.log(),new Nt(e).applyError({code:-32603,message:n.rawMessage}).payload}enable(){let e=W(O.Login);return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}},Nr=["request","overlay","sdk"];function ko(e){let t=Object.getPrototypeOf(e),n=[t];for(;t!==Se.prototype;)t=Object.getPrototypeOf(t),n.push(t);return n}var Yr=class extends Se{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Ot,isPromiEvent:Mt,encodeJSON:Cr,decodeJSON:eo,createJsonRpcRequestPayload:W,standardizeJsonRpcRequestPayload:st,storage:jr};let e=[this,...ko(this)];Nr.forEach(t=>{let n=e.map(m=>Object.getOwnPropertyDescriptor(m,t)),o=n.findIndex(m=>!!m),a=o>0,l=n[o];l&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:l,isPrototypeField:a}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw so(t)}}))})}init(e){this.__is_initialized__||(Nr.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:n,isPrototypeField:o}=this.__sdk_access_field_descriptors__.get(t);o?delete this[t]:Object.defineProperty(this,t,n)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:n,useInstead:o}=e,a=o?` Use \`${o}\` instead.`:"",l=`\`${t}\` will be removed from this Extension in version \`${n}\`.${a}`;return new at(this,"DEPRECATION_NOTICE",l)}createWarning(e,t){return new at(this,e,t)}createError(e,t,n){return new ct(this,e,t,n)}},Bo=class extends Yr{},Ae=class extends Yr{};Ae.Internal=Bo,Ae.Anonymous="anonymous extension";var Wo=class extends Se{purchase(e){let t=W(O.NFTPurchase,[e]);return this.request(t)}checkout(e){let t=W(O.NFTCheckout,[e]);return this.request(t)}transfer(e){let t=W(O.NFTTransfer,[e]);return this.request(t)}};function Mr(e){return e.compat&&e.compat[H.sdkName]!=null?typeof e.compat[H.sdkName]=="string"?Vi(Xi(H.version),e.compat[H.sdkName]):!!e.compat[H.sdkName]:!0}function Fo(e){var t;let n=(t=e==null?void 0:e.extensions)!=null?t:[],o={},a=[];if(Array.isArray(n)?n.forEach(l=>{Mr(l)?(l.init(this),(l.name||l.name!==Ae.Anonymous)&&(this[l.name]=l),l instanceof Ae.Internal&&(bt(l.config)||(o[l.name]=l.config))):a.push(l)}):Object.keys(n).forEach(l=>{if(Mr(n[l])){n[l].init(this);let m=n[l];this[l]=m,m instanceof Ae.Internal&&(bt(m.config)||(o[n[l].name]=m.config))}else a.push(n[l])}),a.length)throw lo(a);return o}var ot=class{constructor(e,t){this.apiKey=e;var n;if(!e)throw oo();H.platform==="react-native"&&(t==null?void 0:t.endpoint)&&fo().log();let{defaultEndpoint:o,version:a}=H;this.testMode=!!(t!=null&&t.testMode),this.endpoint=ze((n=t==null?void 0:t.endpoint)!=null?n:o).origin,this.auth=new Eo(this),this.user=new Ao(this),this.wallet=new xo(this),this.nft=new Wo(this),this.rpcProvider=new Uo(this);let l=Fo.call(this,t);this.parameters=Cr(At({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:ze(this.endpoint).host,sdk:io[H.sdkName],version:a,ext:bt(l)?void 0:l,locale:(t==null?void 0:t.locale)||"en_US"},H.bundleId?{bundleId:H.bundleId}:{})),t!=null&&t.deferPreload||this.preload()}get overlay(){if(!ot.__overlays__.has(this.parameters)){let e=new H.ViewController(this.endpoint,this.parameters);e.init(),ot.__overlays__.set(this.parameters,e)}return ot.__overlays__.get(this.parameters)}preload(){return ae(this,null,function*(){yield this.overlay.checkIsReadyForRequest})}},Pt=ot;Pt.__overlays__=new Map;function Go(e,t){return t&&Array.isArray(e)?e.find(n=>n.id===t):e}function jo(e,t){var n;let o=(n=t.data.response)==null?void 0:n.id,a=Go(e,o);if(o&&a){let l=new Nt(a).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:o,response:l}}return{}}function qo(e,t){return ae(this,null,function*(){var n;let o=yield pe("rt"),a;if(H.platform==="web")try{a=(n=yield pe("jwt"))!=null?n:yield Mo()}catch(l){console.error("webcrypto error",l)}return a?o?{msgType:e,payload:t,jwt:a,rt:o}:{msgType:e,payload:t,jwt:a}:{msgType:e,payload:t}})}function Vo(e){return ae(this,null,function*(){!e.data.rt||(yield Ue("rt",e.data.rt))})}var Hr=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.isConnectedToInternet=!0,this.checkIsReadyForRequest=this.waitForReady(),this.listen()}post(e,t){return ae(this,null,function*(){return Gr((n,o)=>ae(this,null,function*(){if(!this.isConnectedToInternet){let v=Tt();o(v)}yield this.checkIsReadyForRequest;let a=[],l=Array.isArray(t)?t.map(v=>v.id):[],m=yield qo(`${e}-${this.parameters}`,t);yield this._post(m);let h=v=>E=>{let{id:T,response:_}=jo(t,E);Vo(E),T&&_&&Array.isArray(t)&&l.includes(T)?(a.push(_),a.length===t.length&&(v(),n(a))):T&&_&&!Array.isArray(t)&&T===t.id&&(v(),n(_))},g=this.on(he.MAGIC_HANDLE_RESPONSE,h(()=>g()))}))})}on(e,t){let n=t.bind(window),o=a=>{a.data.msgType===`${e}-${this.parameters}`&&n(a)};return this.messageHandlers.add(o),()=>this.messageHandlers.delete(o)}waitForReady(){return new Promise(e=>{this.on(he.MAGIC_OVERLAY_READY,()=>{e()})})}listen(){this.on(he.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(he.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}};var Ct={};ar(Ct,{DeepLinkPage:()=>cr,DeviceVerificationEventEmit:()=>Ve,DeviceVerificationEventOnReceived:()=>hr,EthChainType:()=>pr,Events:()=>Le,Extension:()=>Ae,ExtensionError:()=>ct,ExtensionWarning:()=>at,LoginWithEmailOTPEventEmit:()=>Re,LoginWithEmailOTPEventOnReceived:()=>dr,LoginWithMagicLinkEventEmit:()=>ur,LoginWithMagicLinkEventOnReceived:()=>fr,MagicIncomingWindowMessage:()=>he,MagicOutgoingWindowMessage:()=>be,MagicPayloadMethod:()=>O,RPCError:()=>xe,RPCErrorCode:()=>Oe,RecoveryMethodType:()=>mr,SDKError:()=>me,SDKErrorCode:()=>de,SDKWarning:()=>Be,SDKWarningCode:()=>we,Wallets:()=>ce,isPromiEvent:()=>Mt});var dt=lr(zr()),Dt=lr(Qr());var Ko={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function Yo(e){for(let[t,n]of Object.entries(Ko))e.style[t]=n}function Ho(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(n=>n.src.includes(e)))}var ft=class extends Hr{constructor(){super(...arguments);this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(n=>{let o=()=>{if(Ho(encodeURIComponent(this.parameters)))xr().log();else{let a=document.createElement("iframe");a.classList.add("magic-iframe"),a.dataset.magicIframeLabel=ze(this.endpoint).host,a.title="Secure Modal",a.src=ze(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,Yo(a),document.body.appendChild(a),n(a)}};["loaded","interactive","complete"].includes(document.readyState)?o():window.addEventListener("load",o,!1)}),window.addEventListener("message",n=>{var o;if(n.origin===this.endpoint&&n.data&&n.data.msgType&&this.messageHandlers.size){n.data.response=(o=n.data.response)!=null?o:{};for(let a of this.messageHandlers.values())a(n)}})}showOverlay(){return Me(this,null,function*(){let n=yield this.iframe;n.style.display="block",this.activeElement=document.activeElement,n.focus()})}hideOverlay(){return Me(this,null,function*(){var o;let n=yield this.iframe;n.style.display="none",(o=this.activeElement)!=null&&o.focus&&this.activeElement.focus(),this.activeElement=null})}_post(n){return Me(this,null,function*(){let o=yield this.iframe;if(o&&o.contentWindow)o.contentWindow.postMessage(n,this.endpoint);else throw Tt()})}};var Xo=Object.assign(Dr(Pt,{platform:"web",sdkName:"magic-sdk",version:"21.3.1",defaultEndpoint:"https://auth.magic.link/",ViewController:ft,configureStorage:()=>Me(void 0,null,function*(){let e=dt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(Dt),yield e.setDriver([dt.default.INDEXEDDB,dt.default.LOCALSTORAGE,Dt._driver]),e})}),ir({},Ct)),zo=Xo;return Zn(Jo);})();
if (Magic && Magic.default != null) { Magic = Object.assign(Magic.default, Magic); delete Magic.default; }
