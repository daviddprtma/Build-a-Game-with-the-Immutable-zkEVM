import get from 'lodash.get';

import { DesignTokens } from '../types';

export const pickTokenValue = <T extends unknown>(
  themeProps: DesignTokens,
  selector: string,
) => get(themeProps, selector) as T;

export function smartPickTokenValue<T extends unknown>(
  themeProps: DesignTokens,
  selector: string,
): T {
  let pickedToken = pickTokenValue<string | object>(themeProps, selector);
  if (typeof pickedToken === 'string' && pickedToken.match(/^base./)) {
    pickedToken = smartPickTokenValue<string | object>(themeProps, pickedToken);
  }
  return pickedToken as T;
}
