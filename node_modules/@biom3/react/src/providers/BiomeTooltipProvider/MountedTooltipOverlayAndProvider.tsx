import { ReactNode, useContext } from 'react';

import { ClientOnlyPortal } from '../../overlays/ClientOnlyPortal';
import { TooltipOverlay } from '../../overlays/TooltipOverlay';
import { BiomePortalIdContext } from '../BiomePortalIdProvider/BiomePortalIdProvider';
import { BiomeTooltipProvider } from './context';

const SELECTOR = 'tooltip-container';
export function MountedTooltipOverlayAndProvider({
  children,
}: {
  children: ReactNode;
}) {
  const portalId = useContext(BiomePortalIdContext);
  return (
    <BiomeTooltipProvider>
      {children}

      {/* TOOLTIP */}
      <ClientOnlyPortal selector={`#${SELECTOR}${portalId}`}>
        <TooltipOverlay />
      </ClientOnlyPortal>
      <div id={`${SELECTOR}${portalId}`} />
    </BiomeTooltipProvider>
  );
}
