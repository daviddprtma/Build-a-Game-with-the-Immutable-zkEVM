import { ReactElement } from 'react';
import merge from 'ts-deepmerge';

import { useTheme } from '../../hooks';
import { Body } from '../Text/Body';
import { shouldInvertColoring } from './styles';
import { BannerTextProps, DEFAULT_BANNER_VARIANT } from './types';

export function BannerCaption<RC extends ReactElement | undefined = undefined>({
  children,
  size = 'medium',
  weight,
  variant = DEFAULT_BANNER_VARIANT,
  sx = {},
  ...props
}: BannerTextProps<RC>) {
  const theme = useTheme();
  const invertColoring = shouldInvertColoring(variant, theme);
  const mergedSx = merge(
    {
      color: invertColoring
        ? 'base.color.text.inverse.primary'
        : 'base.color.text.primary',
    },
    sx,
  );
  return (
    <Body {...props} size={size} weight={weight} sx={mergedSx}>
      {children}
    </Body>
  );
}

BannerCaption.displayName = 'Banner.Caption';
