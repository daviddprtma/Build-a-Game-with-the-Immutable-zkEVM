import { ReactElement } from 'react';
import merge from 'ts-deepmerge';

import { ButtonProps } from '../../types/clickable';
import { Button } from '../Clickable';

export type CardButtonProps<RC extends ReactElement | undefined = undefined> =
  ButtonProps<RC>;

export function CardButton<RC extends ReactElement | undefined = undefined>({
  sx = {},
  variant = 'tertiary',
  className = 'CardButton',
  ...props
}: CardButtonProps<RC>) {
  const { onClick } = 'onClick' in props ? props : { onClick: null };
  return (
    <Button
      {...props}
      variant={variant}
      sx={merge({ flexGrow: 1 }, sx)}
      className={className}
      onClick={ev => {
        ev.stopPropagation();
        if (typeof onClick === 'function') {
          onClick(ev);
        }
      }}
    />
  );
}

CardButton.displayName = 'Card.Button';
