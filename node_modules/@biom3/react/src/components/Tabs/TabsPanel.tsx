import { ReactElement } from 'react';
import merge from 'ts-deepmerge';

import { Box } from '../Box';
import { renderTabsPanelStyles } from './styles';
import { useTabsContext } from './TabsContext';
import { TabsPanelProps } from './types';

export function TabsPanel<RC extends ReactElement | undefined = undefined>({
  testId = 'Tabs__Panel',
  children,
  value,
  sx = {},
  ...props
}: TabsPanelProps<RC>) {
  const { currentTabValue } = useTabsContext();
  if (currentTabValue !== value) return null;
  const tabsPanelStyles = renderTabsPanelStyles();
  const allStyles = merge(tabsPanelStyles, sx);

  return (
    <Box {...props} testId={testId} sx={allStyles}>
      {children}
    </Box>
  );
}

TabsPanel.displayName = 'Tabs.Panel';
