import { ReactElement } from 'react';
import merge from 'ts-deepmerge';

import { useGetSubcomponentChildren } from '../../hooks/useGetSubcomponentChildren';
import { Box } from '../Box';
import { renderTabsListStyles } from './styles';
import { Tab } from './Tab';
import { TabsListProps } from './types';

export function TabsList<RC extends ReactElement | undefined = undefined>({
  testId = 'Tabs__List',
  domRef = { current: null },
  children,
  contentOrientation = 'horizontal',
  sx = {},
  ...props
}: TabsListProps<RC>) {
  const tabsListStyles = renderTabsListStyles();
  const tabSubcomponentChildren = useGetSubcomponentChildren(children, Tab);
  const allStyles = merge(tabsListStyles, sx);

  return (
    <Box
      {...props}
      testId={testId}
      domRef={domRef}
      className={`TabsList__${contentOrientation}`}
      sx={allStyles}
    >
      {tabSubcomponentChildren}
    </Box>
  );
}

TabsList.displayName = 'Tabs.List';
