import merge from 'ts-deepmerge';

import { InputTextAlign } from '../../types/input';
import { DomPropsWithDomRef } from '../../types/shared';
import { BaseBodyProps } from '../../types/text';
import { Body } from '../Text/Body';
import { DEFAULT_TEXT_INPUT_ALIGN } from '../TextInput/shared';

export type FormControlCaptionProps = Omit<
  BaseBodyProps & DomPropsWithDomRef<'span'>,
  'rc'
> & { textAlign?: InputTextAlign };

export function FormControlCaption({
  size = 'small',
  children,
  testId,
  sx = {},
  textAlign = DEFAULT_TEXT_INPUT_ALIGN,
  ...props
}: FormControlCaptionProps) {
  return (
    <Body
      {...props}
      testId={testId}
      rc={<span />}
      size={size}
      sx={merge(
        {
          marginBottom: 'base.spacing.x2',
          color: 'base.color.text.secondary',
          textAlign,
        },
        sx,
      )}
    >
      {children}
    </Body>
  );
}

FormControlCaption.displayName = 'FormControlCaption';
