import { DistributiveOmit } from '@emotion/react';
import { ReactElement } from 'react';
import merge from 'ts-deepmerge';

import { StatefulButtCon, StatefulButtConProps } from '../Clickable';

type MenuItemStatefulButtConProps<
  RC extends ReactElement | undefined = undefined,
> = DistributiveOmit<StatefulButtConProps<RC>, 'size'>;

export function MenuItemStatefulButtCon<
  RC extends ReactElement | undefined = undefined,
>({ sx = {}, ...props }: MenuItemStatefulButtConProps<RC>) {
  const { onClick } = 'onClick' in props ? props : { onClick: null };
  return (
    <StatefulButtCon
      {...props}
      sx={merge({ flexShrink: 0 }, sx)}
      onClick={ev => {
        ev.stopPropagation();
        if (typeof onClick === 'function') {
          onClick(ev);
        }
      }}
      size="small"
    />
  );
}

MenuItemStatefulButtCon.displayName = 'MenuItem.StatefulButtCon';
